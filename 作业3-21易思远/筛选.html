<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>筛选</title>
</head>
<body>

<script>

    function listToArr(nodeList){
        return Array.prototype.slice.call(nodeList,0);
    }
    //初始化加载所有数据
    showList(["男","女","人妖"]);
    //创建容纳激活标签的数组
    var activeArr =[];

    //获取 tab 中的 按钮的DOM 和激活标签的DON
    var aBtns=document.querySelectorAll(".tab a")//tab中 按钮
    var activeBtns = document.querySelectorAll(".active_tab span");

    //添加事件
    for(var i=0;i<aBtns.length;i++){
        aBtns[i].addEventListener("click",function (event) {
            //点击的筛选项的值
            var t=this.innerText;
            var tIndex=activeArr.indexOf(t);
            if(tIndex !==-1){//激活标签数组中已经有了当前要添加的值
                activeArr.splice(tIndex,1);//移除数组中的项

            }else{//还没有添加相应的筛选条件
                activeArr.push(t);

            }
            showList(activeArr);
            activeTabFn(activeArr);

        },false);
    }

    for(var i=0;i<activeBtns.length;i++){
        activeBtns[i].onclick=function () {
            var activeBtnText=this.innerText;
            var tIndex=activeArr.indexOf(activeBtnText);
            if(tIndex !== -1){
                //点击的激活选项在激活数组中找到了
                activeArr.splice(tIndex,1);
            }
            activeTabFn(activeArr);
            showList(activeArr);

        }
    }



    //激活状态
    function  activeTabFn(targetArr) {
        //根据数组添加 class 激活标签
        listToArr(aBtns).forEach(function (item,index) {
            if(targetArr.indexOf(item.innerText)!== -1){
                //如果当前点击的按钮的值在激活的数组里面
                item.classList.add("active");

            }else{
                //如果不在就移除掉他
                item.classList.remove("active");
            }
        });
        //根据激活的数组显示隐藏已选标签
        listToArr(activeBtns).forEach(function (item,index) {
            var spanText=item.innerText;
            if(targetArr.indexOf(spanText)!== -1){
                //当前的筛选激活项在目标数组里面存在
                item.classList.remove("hide");
                item.classList.add("show");
            }else{
                //当前的筛选激活项在目标数组里面不存在
                item.classList.remove("show");
                item.classList.add("hide");
            }


        })

    }


    //显示列表的函数
    function  showList(targetArr) {
//已经筛选出来的html 内容
        var html="";
        targetArr.forEach(function (item,index) {
            pArr.forEach(function (pObj,pIndex) {
                if(item == pObj.sex){
                    //匹配到了激活标签对应的对象
                    html+=' <div class="tab_item">'+
                        '<p>姓名：'+pObj.name+'</p>'+
                        ' <p>年龄：'+pObj.age+'</p>'+
                        ' <p>性别：'+pObj.sex+'</p>'+
                        '<p>爱好：'+pObj.aihao+'</p>'+
                        ' <p>个人介绍：'+pObj.gerenjiesao+'</p>'+
                        ' </div>'
                }

            });
        }) ;
        document.querySelector(".showxx").innerHTML=html;

    }
</script>










<script>

    function listToArr(nodeList){
        return Array.prototype.slice.call(nodeList,0);
    }
    //初始化加载所有数据
    showList(["男","女","人妖"]);
    //创建容纳激活标签的数组
    var activeArr =[];

    //获取 tab 中的 按钮的DOM 和激活标签的DON
    var aBtns=document.querySelectorAll(".tab a")//tab中 按钮
    var activeBtns = document.querySelectorAll(".active_tab span");

    //添加事件
    for(var i=0;i<aBtns.length;i++){
        aBtns[i].addEventListener("click",function (event) {
            //点击的筛选项的值
            var t=this.innerText;
            var tIndex=activeArr.indexOf(t);
            if(tIndex !==-1){//激活标签数组中已经有了当前要添加的值
                activeArr.splice(tIndex,1);//移除数组中的项

            }else{//还没有添加相应的筛选条件
                activeArr.push(t);

            }
            showList(activeArr);
            activeTabFn(activeArr);

        },false);
    }

    for(var i=0;i<activeBtns.length;i++){
        activeBtns[i].onclick=function () {
            var activeBtnText=this.innerText;
            var tIndex=activeArr.indexOf(activeBtnText);
            if(tIndex !== -1){
                //点击的激活选项在激活数组中找到了
                activeArr.splice(tIndex,1);
            }
            activeTabFn(activeArr);
            showList(activeArr);

        }
    }



    //激活状态
    function  activeTabFn(targetArr) {
        //根据数组添加 class 激活标签
        listToArr(aBtns).forEach(function (item,index) {
            if(targetArr.indexOf(item.innerText)!== -1){
                //如果当前点击的按钮的值在激活的数组里面
                item.classList.add("active");

            }else{
                //如果不在就移除掉他
                item.classList.remove("active");
            }
        });
        //根据激活的数组显示隐藏已选标签
        listToArr(activeBtns).forEach(function (item,index) {
            var spanText=item.innerText;
            if(targetArr.indexOf(spanText)!== -1){
                //当前的筛选激活项在目标数组里面存在
                item.classList.remove("hide");
                item.classList.add("show");
            }else{
                //当前的筛选激活项在目标数组里面不存在
                item.classList.remove("show");
                item.classList.add("hide");
            }


        })

    }


    //显示列表的函数
    function  showList(targetArr) {
//已经筛选出来的html 内容
        var html="";
        targetArr.forEach(function (item,index) {
            pArr.forEach(function (pObj,pIndex) {
                if(item == pObj.sex){
                    //匹配到了激活标签对应的对象
                    html+=' <div class="tab_item">'+
                        '<p>姓名：'+pObj.name+'</p>'+
                        ' <p>年龄：'+pObj.age+'</p>'+
                        ' <p>性别：'+pObj.sex+'</p>'+
                        '<p>爱好：'+pObj.aihao+'</p>'+
                        ' <p>个人介绍：'+pObj.gerenjiesao+'</p>'+
                        ' </div>'
                }

            });
        }) ;
        document.querySelector(".showxx").innerHTML=html;

    }
</script>














<script>

    function listToArr(nodeList){
        return Array.prototype.slice.call(nodeList,0);
    }
    //初始化加载所有数据
    showList(["男","女","人妖"]);
    //创建容纳激活标签的数组
    var activeArr =[];

    //获取 tab 中的 按钮的DOM 和激活标签的DON
    var aBtns=document.querySelectorAll(".tab a")//tab中 按钮
    var activeBtns = document.querySelectorAll(".active_tab span");

    //添加事件
    for(var i=0;i<aBtns.length;i++){
        aBtns[i].addEventListener("click",function (event) {
            //点击的筛选项的值
            var t=this.innerText;
            var tIndex=activeArr.indexOf(t);
            if(tIndex !==-1){//激活标签数组中已经有了当前要添加的值
                activeArr.splice(tIndex,1);//移除数组中的项

            }else{//还没有添加相应的筛选条件
                activeArr.push(t);

            }
            showList(activeArr);
            activeTabFn(activeArr);

        },false);
    }

    for(var i=0;i<activeBtns.length;i++){
        activeBtns[i].onclick=function () {
            var activeBtnText=this.innerText;
            var tIndex=activeArr.indexOf(activeBtnText);
            if(tIndex !== -1){
                //点击的激活选项在激活数组中找到了
                activeArr.splice(tIndex,1);
            }
            activeTabFn(activeArr);
            showList(activeArr);

        }
    }



    //激活状态
    function  activeTabFn(targetArr) {
        //根据数组添加 class 激活标签
        listToArr(aBtns).forEach(function (item,index) {
            if(targetArr.indexOf(item.innerText)!== -1){
                //如果当前点击的按钮的值在激活的数组里面
                item.classList.add("active");

            }else{
                //如果不在就移除掉他
                item.classList.remove("active");
            }
        });
        //根据激活的数组显示隐藏已选标签
        listToArr(activeBtns).forEach(function (item,index) {
            var spanText=item.innerText;
            if(targetArr.indexOf(spanText)!== -1){
                //当前的筛选激活项在目标数组里面存在
                item.classList.remove("hide");
                item.classList.add("show");
            }else{
                //当前的筛选激活项在目标数组里面不存在
                item.classList.remove("show");
                item.classList.add("hide");
            }


        })

    }


    //显示列表的函数
    function  showList(targetArr) {
//已经筛选出来的html 内容
        var html="";
        targetArr.forEach(function (item,index) {
            pArr.forEach(function (pObj,pIndex) {
                if(item == pObj.sex){
                    //匹配到了激活标签对应的对象
                    html+=' <div class="tab_item">'+
                        '<p>姓名：'+pObj.name+'</p>'+
                        ' <p>年龄：'+pObj.age+'</p>'+
                        ' <p>性别：'+pObj.sex+'</p>'+
                        '<p>爱好：'+pObj.aihao+'</p>'+
                        ' <p>个人介绍：'+pObj.gerenjiesao+'</p>'+
                        ' </div>'
                }

            });
        }) ;
        document.querySelector(".showxx").innerHTML=html;

    }
</script>
</body>
</html>