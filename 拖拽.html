<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<style type="text/css">
		* {
			padding: 0;
			margin: 0;
		}
		
		.wrap{
			width: 100px;
			height: 100px;
			background: #f00;
			cursor: pointer;
			position: absolute;
			left: 0;
			top: 0;
		}
	</style>

	<body>
		<div class="wrap">

		</div>
	</body>
	<script type="text/javascript" src="../js/jquery-1.11.3.min.js"></script>
	<script type="text/javascript">
		$(".wrap").mousedown(function(e) {
			// e.pageX
			var positionDiv = $(this).offset();
			var distenceX = e.pageX - positionDiv.left;
			var distenceY = e.pageY - positionDiv.top;
			//alert(distenceX)
			// alert(positionDiv.left);

			$(document).mousemove(function(e) {
//				console.log(e)
				var x = e.pageX - distenceX;
				var y = e.pageY - distenceY;
				if(x < 0) {
					x = 0;
				} else if(x > $(document).width() - $('div').outerWidth(true)) {
					x = $(document).width() - $('div').outerWidth(true);
				}

				if(y < 0) {
					y = 0;
				} else if(y > $(document).height() - $('div').outerHeight(true)) {
					y = $(document).height() - $('div').outerHeight(true);
				}

				$('div').css({
					'left': x + 'px',
					'top': y + 'px'
				});
			});

			$(document).mouseup(function() {
				$(document).off('mousemove');
			});
		});
	</script>

</html>